<mujoco model="franka_panda">
    <compiler angle="radian" meshdir="assets" autolimits="true"/>
    
    <option timestep="0.002" gravity="0 0 -9.81" integrator="implicitfast"/>
    
    <visual>
        <headlight ambient="0.5 0.5 0.5" diffuse="0.8 0.8 0.8" specular="0.3 0.3 0.3"/>
        <rgba haze="0.15 0.25 0.35 1"/>
        <global azimuth="120" elevation="-20"/>
    </visual>
    
    <asset>
        <texture name="grid" type="2d" builtin="checker" width="512" height="512" 
                 rgb1="0.1 0.1 0.1" rgb2="0.2 0.2 0.2"/>
        <material name="grid" texture="grid" texrepeat="2 2" texuniform="true" reflectance="0.2"/>
        <material name="panda_white" rgba="0.95 0.95 0.95 1"/>
    </asset>
    
    <worldbody>
        <!-- Ground -->
        <light name="spotlight" mode="targetbodycom" target="panda_link0" 
               pos="0 0 3" dir="0 0 -1" diffuse="0.8 0.8 0.8" specular="0.3 0.3 0.3"/>
        <geom name="floor" type="plane" size="2 2 0.05" material="grid" condim="3"/>
        
        <!-- Panda Robot -->
        <body name="panda_link0" pos="0 0 0">
            <inertial mass="3.06" pos="0 0 0.05" 
                      diaginertia="0.3 0.3 0.3"/>
            <geom type="cylinder" size="0.06 0.03" rgba="0.95 0.95 0.95 1"/>
            
            <!-- Joint 1 (Base rotation) -->
            <body name="panda_link1" pos="0 0 0.333">
                <inertial mass="2.74" pos="0 0 -0.07" 
                          diaginertia="0.1 0.1 0.1"/>
                <joint name="panda_joint1" type="hinge" axis="0 0 1" 
                       range="-2.8973 2.8973" damping="10"/>
                <geom type="cylinder" size="0.06 0.08" rgba="0.95 0.95 0.95 1"/>
                
                <!-- Joint 2 (Shoulder) -->
                <body name="panda_link2" pos="0 0 0" quat="0.707107 -0.707107 0 0">
                    <inertial mass="2.74" pos="0 -0.06 0.07" 
                              diaginertia="0.1 0.1 0.1"/>
                    <joint name="panda_joint2" type="hinge" axis="0 0 1" 
                           range="-1.7628 1.7628" damping="10"/>
                    <geom type="cylinder" size="0.06 0.08" rgba="0.95 0.95 0.95 1"/>
                    
                    <!-- Joint 3 (Upper arm) -->
                    <body name="panda_link3" pos="0 -0.316 0" quat="0.707107 0.707107 0 0">
                        <inertial mass="2.38" pos="0.04 0.03 -0.12" 
                                  diaginertia="0.1 0.1 0.1"/>
                        <joint name="panda_joint3" type="hinge" axis="0 0 1" 
                               range="-2.8973 2.8973" damping="10"/>
                        <geom type="cylinder" size="0.06 0.12" rgba="0.95 0.95 0.95 1"/>
                        
                        <!-- Joint 4 (Elbow) -->
                        <body name="panda_link4" pos="0.0825 0 0" quat="0.707107 0.707107 0 0">
                            <inertial mass="2.38" pos="-0.04 0.03 0.12" 
                                      diaginertia="0.1 0.1 0.1"/>
                            <joint name="panda_joint4" type="hinge" axis="0 0 1" 
                                   range="-3.0718 -0.0698" damping="10"/>
                            <geom type="cylinder" size="0.06 0.12" rgba="0.95 0.95 0.95 1"/>
                            
                            <!-- Joint 5 (Forearm) -->
                            <body name="panda_link5" pos="-0.0825 0.384 0" quat="0.707107 -0.707107 0 0">
                                <inertial mass="2.74" pos="0 0.05 -0.26" 
                                          diaginertia="0.1 0.1 0.1"/>
                                <joint name="panda_joint5" type="hinge" axis="0 0 1" 
                                       range="-2.8973 2.8973" damping="10"/>
                                <geom type="cylinder" size="0.06 0.1" rgba="0.95 0.95 0.95 1"/>
                                
                                <!-- Joint 6 (Wrist) -->
                                <body name="panda_link6" pos="0 0 0" quat="0.707107 0.707107 0 0">
                                    <inertial mass="1.55" pos="0.05 0.01 0.02" 
                                              diaginertia="0.05 0.05 0.05"/>
                                    <joint name="panda_joint6" type="hinge" axis="0 0 1" 
                                           range="-0.0175 3.7525" damping="5"/>
                                    <geom type="cylinder" size="0.05 0.04" rgba="0.95 0.95 0.95 1"/>
                                    
                                    <!-- Joint 7 (Flange) -->
                                    <body name="panda_link7" pos="0.088 0 0" quat="0.707107 0.707107 0 0">
                                        <inertial mass="0.5" pos="0 0 0.05" 
                                                  diaginertia="0.01 0.01 0.01"/>
                                        <joint name="panda_joint7" type="hinge" axis="0 0 1" 
                                               range="-2.8973 2.8973" damping="5"/>
                                        <geom type="cylinder" size="0.04 0.03" rgba="0.95 0.95 0.95 1"/>
                                        
                                        <!-- End effector site -->
                                        <site name="ee_site" pos="0 0 0.107" size="0.01" 
                                              rgba="1 0 0 1"/>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
        
        <!-- Target object for manipulation -->
        <body name="target_box" pos="0.5 0 0.2">
            <freejoint/>
            <geom name="box" type="box" size="0.05 0.05 0.05" 
                  rgba="0.2 0.6 0.9 1" mass="0.1" condim="3"/>
            <site name="target_site" pos="0 0 0" size="0.02" rgba="0 1 0 1"/>
        </body>
    </worldbody>
    
    <actuator>
        <!-- Position servos for all 7 joints -->
        <position name="actuator1" joint="panda_joint1" kp="4500" ctrlrange="-2.8973 2.8973"/>
        <position name="actuator2" joint="panda_joint2" kp="4500" ctrlrange="-1.7628 1.7628"/>
        <position name="actuator3" joint="panda_joint3" kp="3500" ctrlrange="-2.8973 2.8973"/>
        <position name="actuator4" joint="panda_joint4" kp="3500" ctrlrange="-3.0718 -0.0698"/>
        <position name="actuator5" joint="panda_joint5" kp="2000" ctrlrange="-2.8973 2.8973"/>
        <position name="actuator6" joint="panda_joint6" kp="2000" ctrlrange="-0.0175 3.7525"/>
        <position name="actuator7" joint="panda_joint7" kp="2000" ctrlrange="-2.8973 2.8973"/>
    </actuator>
</mujoco>
